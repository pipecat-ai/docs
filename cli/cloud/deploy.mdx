---
title: deploy
description: "Create or modify an agent deployment"
---

The `deploy` command creates a new agent deployment or updates an existing one. It builds a deployment manifest with the provided parameters and monitors the deployment status until the agent is ready.

If the agent name already exists, you'll be prompted to confirm the update unless the `--force` flag is used.

This command will wait for the active deployment / revision to enter a ready state before returning. If the deployment fails, the command will exit with an [error](/deployment/pipecat-cloud/fundamentals/error-codes) with more information.

## Usage

```shell
pipecat cloud deploy [ARGS] [OPTIONS]
```

**Arguments:**

<ParamField path="agent-name" type="string" required>
  Unique string identifier for the agent deployment. Must not contain spaces.
</ParamField>

<ParamField path="image" type="string" required>
  URL of the Docker image to deploy. Must be a valid Docker image URL. For
  example: `docker.io/my-repo/my-image:latest`.
</ParamField>

**Options:**

<ParamField path="--credentials / -c" type="string">
  Name of the image pull secret to use for accessing private repositories. The
  secret must be previously created using the `pipecat cloud secrets
  image-pull-secret` command.
</ParamField>

<ParamField path="--organization / -o" type="string">
  Organization to deploy the agent to. If not provided, uses the current
  organization from your configuration.
</ParamField>

<ParamField path="--secrets / -s" type="string">
  Name of the secret set to use for the deployment. The secret set must exist in
  the specified organization.
</ParamField>

<ParamField path="--min-agents / -min" type="number" default="0">
  Minimum number of agent instances to keep warm at all times. Default is 0,
  which means the agent will scale down to zero when not in use. Setting this to
  1 or higher avoids cold starts.
</ParamField>

<ParamField path="--max-agents / -max" type="number" default="50">
  Maximum number of allowed agent instances. Must be between 1 and 50. If you
  need more agents, please contact us at help@daily.co or via
  [Discord](https://discord.gg/dailyco).
</ParamField>

<ParamField path="--krisp-viva-audio-filter" type="string">
  Enable Krisp VIVA noise cancellation with the specified audio filter model.
  Valid values are:
  
  - `tel`: Telephony model (up to 16kHz)
  - `pro`: WebRTC model (up to 32kHz)

In addition to this flag, you also need to enable the `KrispVivaFilter()` for your transport. See the [Krisp VIVA](/server/utilities/audio/krisp-viva-filter) documentation for more information.

</ParamField>

<ParamField path="--enable-managed-keys" type="boolean" default="false">
  Enable [managed API keys](/deployment/pipecat-cloud/guides/managed-api-keys)
  for this deployed agent.
</ParamField>

<ParamField path="--profile / -p" type="string" default="agent-1x">
  The agent profile to use for resource allocation. Valid values are:
  `agent-1x`, `agent-2x`, `agent-3x`.

See [Agent Profiles](/deployment/pipecat-cloud/fundamentals/deploy#agent-profiles) for more information.

</ParamField>

<ParamField path="--region / -r" type="string">
  Region where the agent will be deployed. If not specified, uses your
  organization's default region (typically `us-west`). Choose a region close to
  your users for optimal latency.
</ParamField>

<ParamField path="--force / -f" type="boolean" default="false">
  Force deployment and skip confirmation prompts. Use with caution.
</ParamField>

## Examples

**Deploy a new agent:**

```shell
pipecat cloud deploy my-first-agent your-docker-repository/my-first-agent:0.1
```

**Update an existing agent with a new image:**

```shell
pipecat cloud deploy my-first-agent your-docker-repository/my-first-agent:0.2
```

**Deploy with a specific secret set:**

```shell
pipecat cloud deploy my-first-agent your-docker-repository/my-first-agent:0.1 --secrets my-secret-set
```

**Deploy a private image using image pull credentials:**

```shell
pipecat cloud deploy my-first-agent your-docker-repository/my-first-agent:0.1 --credentials dockerhub-creds
```

**Keep one instance always warm to avoid cold starts:**

```shell
pipecat cloud deploy my-first-agent your-docker-repository/my-first-agent:0.1 --min-agents 1
```

**Limit the maximum number of agent instances:**

```shell
pipecat cloud deploy my-first-agent your-docker-repository/my-first-agent:0.1 --max-agents 5
```

**Deploy to a specific region:**

```shell
pipecat cloud deploy my-first-agent your-docker-repository/my-first-agent:0.1 --region eu-central
```

**Deploy with Krisp VIVA noise cancellation:**

```shell
pipecat cloud deploy my-first-agent your-docker-repository/my-first-agent:0.1 --krisp-viva-audio-filter tel
```

## Configuration File (pcc-deploy.toml)

The `deploy` command supports a configuration file for repeatable deployments. Create a `pcc-deploy.toml` file in your project root to define deployment settings that can be shared across your team and version controlled.

### File Location

Place `pcc-deploy.toml` in the same directory where you run the `pipecat cloud deploy` command. The CLI will automatically detect and use this file.

### Precedence

Values are applied with the following order of precedence:

1. CLI arguments (highest priority)
2. `pcc-deploy.toml` values
3. Default values (lowest priority)

This allows you to define defaults in the config file while still overriding specific values via CLI flags when needed.

### Configuration Options

#### Required Fields

<ParamField path="agent_name" type="string" required>
Name of the agent to deploy. Must start with a lowercase letter or number, can
include hyphens, and must end with a lowercase letter or number.

```toml
agent_name = "my-voice-agent"
```

</ParamField>

<ParamField path="image" type="string" required>
Docker image URL with tag.

```toml
image = "your-dockername/my-agent:0.1"
```

</ParamField>

#### Optional Fields

<ParamField path="region" type="string">
Region where the agent will be deployed. If not specified, uses your
organization's default region (typically `us-west`).

```toml
region = "us-east"
```

</ParamField>

<ParamField path="secret_set" type="string">
Name of the secret set to use for environment variables. The secret set must
exist in the same region as the agent.

```toml
secret_set = "my-agent-secrets"
```

</ParamField>

<ParamField path="image_credentials" type="string">
Name of the image pull secret for private registries. The image pull secret must exist in the same region as the agent.

```toml
image_credentials = "dockerhub-credentials"
```

</ParamField>

<ParamField path="agent_profile" type="string" default="agent-1x">
Agent profile for resource allocation. Valid values: `agent-1x`, `agent-2x`, `agent-3x`.

```toml
agent_profile = "agent-2x"
```

</ParamField>

<ParamField path="enable_krisp" type="boolean" default="false">
**Deprecated:** Enable legacy Krisp noise cancellation. Use `krisp_viva` instead.

```toml
enable_krisp = false
```

</ParamField>

<ParamField path="enable_managed_keys" type="boolean" default="false">
Enable managed API keys for this deployment.

```toml
enable_managed_keys = false
```

</ParamField>

#### Scaling Configuration

Define auto-scaling behavior in a `[scaling]` section:

<ParamField path="scaling.min_agents" type="number" default="0">
Minimum number of agent instances to keep warm. Setting to 0 allows scaling to zero but may result in cold starts.

```toml
[scaling]
min_agents = 1
```

</ParamField>

<ParamField path="scaling.max_agents" type="number" default="50">
Maximum number of agent instances allowed.

```toml
[scaling]
max_agents = 20
```

</ParamField>

#### Krisp VIVA Configuration

Configure Krisp VIVA noise cancellation in a `[krisp_viva]` section:

<ParamField path="krisp_viva.audio_filter" type="string">
Krisp VIVA audio filter model. Valid values: `tel` (telephony, up to 16kHz) or `pro` (WebRTC, up to 32kHz). Omit or set to `null` to disable.

```toml
[krisp_viva]
audio_filter = "tel"
```

</ParamField>

### Complete Example

```toml
# Basic agent configuration
agent_name = "my-voice-agent"
image = "your-dockername/my-voice-agent:0.1"
region = "us-west"

# Secrets and credentials
secret_set = "my-agent-secrets"
image_credentials = "dockerhub-credentials"

# Resource allocation
agent_profile = "agent-1x"

# Features
enable_managed_keys = false

# Auto-scaling configuration
[scaling]
min_agents = 1
max_agents = 20

# Krisp VIVA noise cancellation
[krisp_viva]
audio_filter = "tel"
```

### Using the Configuration File

Once you have a `pcc-deploy.toml` file, simply run:

```shell
pipecat cloud deploy
```

The CLI will automatically load your configuration. You can still override any value using CLI flags:

```shell
# Use config file but override the region
pipecat cloud deploy --region eu-central

# Use config file but force update without confirmation
pipecat cloud deploy --force
```
