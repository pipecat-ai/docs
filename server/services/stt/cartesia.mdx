---
title: "Cartesia"
description: "Speech-to-text service implementation using Cartesia's real-time transcription API"
---

## Overview

`CartesiaSTTService` provides real-time speech recognition using Cartesia's WebSocket API with the `ink-whisper` model, supporting streaming transcription with both interim and final results for low-latency applications.

<CardGroup cols={2}>
  <Card
    title="Cartesia STT API Reference"
    icon="code"
    href="https://reference-server.pipecat.ai/en/latest/api/pipecat.services.cartesia.stt.html"
  >
    Pipecat's API methods for Cartesia STT integration
  </Card>
  <Card
    title="Example Implementation"
    icon="play"
    href="https://github.com/pipecat-ai/pipecat/blob/main/examples/foundational/13f-cartesia-transcription.py"
  >
    Complete example with transcription logging
  </Card>
  <Card
    title="Cartesia Documentation"
    icon="book"
    href="https://docs.cartesia.ai/api-reference/stt/stt"
  >
    Official Cartesia STT documentation and features
  </Card>
  <Card title="Cartesia Platform" icon="microphone" href="https://cartesia.ai/">
    Access API keys and transcription models
  </Card>
</CardGroup>

## Installation

To use Cartesia services, install the required dependency:

```bash
pip install "pipecat-ai[cartesia]"
```

## Prerequisites

### Cartesia Account Setup

Before using Cartesia STT services, you need:

1. **Cartesia Account**: Sign up at [Cartesia](https://cartesia.ai/)
2. **API Key**: Generate an API key from your account dashboard
3. **Model Access**: Ensure access to the ink-whisper transcription model

### Required Environment Variables

- `CARTESIA_API_KEY`: Your Cartesia API key for authentication

## Configuration

### CartesiaSTTService

<ParamField path="api_key" type="str" required>
  Cartesia API key for authentication.
</ParamField>

<ParamField path="base_url" type="str" default="api.cartesia.ai">
  Custom API endpoint URL. Override for proxied deployments.
</ParamField>

<ParamField path="sample_rate" type="int" default="16000">
  Audio sample rate in Hz.
</ParamField>

<ParamField path="live_options" type="CartesiaLiveOptions" default="None">
  Configuration options for the transcription service. See [CartesiaLiveOptions](#cartesialiveoptions) below.
</ParamField>

<ParamField path="ttfs_p99_latency" type="float" default="CARTESIA_TTFS_P99">
  P99 latency from speech end to final transcript in seconds. Override for your deployment.
</ParamField>

### CartesiaLiveOptions

Transcription configuration passed via the `live_options` constructor argument.

| Parameter | Type | Default | Description |
| --- | --- | --- | --- |
| `model` | `str` | `"ink-whisper"` | The transcription model to use. |
| `language` | `str` | `"en"` | Target language for transcription. |
| `encoding` | `str` | `"pcm_s16le"` | Audio encoding format. |
| `sample_rate` | `int` | `16000` | Audio sample rate in Hz. |

## Usage

### Basic Setup

```python
from pipecat.services.cartesia import CartesiaSTTService

stt = CartesiaSTTService(
    api_key=os.getenv("CARTESIA_API_KEY"),
)
```

### With Custom Options

```python
from pipecat.services.cartesia import CartesiaSTTService
from pipecat.services.cartesia.stt import CartesiaLiveOptions

stt = CartesiaSTTService(
    api_key=os.getenv("CARTESIA_API_KEY"),
    live_options=CartesiaLiveOptions(
        model="ink-whisper",
        language="es",
        sample_rate=16000,
    ),
)
```

## Notes

- **Inactivity timeout**: Cartesia disconnects WebSocket connections after 3 minutes of inactivity. The timeout resets with each message sent. Silence-based keepalive is enabled by default to prevent disconnections.
- **Auto-reconnect on send**: If the connection is closed (e.g., due to timeout), the service automatically reconnects when the next audio data is sent.
- **Finalize on VAD stop**: When the pipeline's VAD detects the user has stopped speaking, the service sends a `"finalize"` command to flush the transcription session and produce a final result.

## Event Handlers

Cartesia STT supports the standard [service connection events](/server/utilities/service-events):

| Event | Description |
| --- | --- |
| `on_connected` | Connected to Cartesia WebSocket |
| `on_disconnected` | Disconnected from Cartesia WebSocket |

```python
@stt.event_handler("on_connected")
async def on_connected(service):
    print("Connected to Cartesia STT")
```
